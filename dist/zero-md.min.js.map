{"version":3,"file":"zero-md.min.js","sources":["../src/utils/IDfy.js","../src/index.js"],"sourcesContent":["const notAUnicodeWord =\n  /[^_0-9a-zA-Z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]+/g\n\nexport default function IDfy(\n  name,\n  options = { lowerCase: true, replace: { its: notAUnicodeWord, with: '-' } }\n) {\n  return options.lowerCase\n    ? name.toLowerCase().replace(options.replace.its, options.replace.with)\n    : name.replace(options.replace.its, options.replace.with)\n}\n","import IDfy from './utils/IDfy'\n\nexport class ZeroMd extends HTMLElement {\n  get src() {\n    return this.getAttribute('src')\n  }\n\n  get path() {\n    return this.getAttribute('path')\n  }\n\n  get lang() {\n    return (\n      new URLSearchParams(window.location.search).get('lang') ||\n      this.getAttribute('lang') ||\n      this.config.lang\n    )\n  }\n\n  get code() {\n    return (\n      new URLSearchParams(window.location.search).get('code') ||\n      this.getAttribute('code') ||\n      this.config.code\n    )\n  }\n\n  set src(val) {\n    this.reflect('src', val)\n  }\n\n  set path(val) {\n    this.reflect('path', val)\n  }\n\n  set lang(val) {\n    this.reflect('lang', val)\n  }\n\n  set code(val) {\n    this.reflect('code', val)\n  }\n\n  get manualRender() {\n    return this.hasAttribute('manual-render')\n  }\n\n  set manualRender(val) {\n    this.reflect('manual-render', val)\n  }\n\n  reflect(name, val) {\n    if (val === false) {\n      this.removeAttribute(name)\n    } else {\n      this.setAttribute(name, val === true ? '' : val)\n    }\n  }\n\n  static get observedAttributes() {\n    return ['src', 'path', 'lang', 'code']\n  }\n\n  attributeChangedCallback(name, old, val) {\n    if (\n      (name === 'src' || name === 'path' || name === 'lang' || name === 'code') &&\n      this.connected &&\n      !this.manualRender &&\n      val !== old\n    ) {\n      this.render()\n    }\n  }\n\n  constructor(defaults) {\n    super()\n    this.version = '$VERSION'\n    this.config = {\n      markedUrl: 'https://cdn.jsdelivr.net/gh/markedjs/marked@2/marked.min.js',\n      prismUrl: [\n        ['https://cdn.jsdelivr.net/gh/PrismJS/prism@1/prism.min.js', 'data-manual'],\n        'https://cdn.jsdelivr.net/gh/PrismJS/prism@1/plugins/autoloader/prism-autoloader.min.js'\n      ],\n      cssUrls: [\n        'https://cdn.jsdelivr.net/gh/sindresorhus/github-markdown-css@4/github-markdown.min.css',\n        'https://cdn.jsdelivr.net/gh/PrismJS/prism@1/themes/prism.min.css',\n        'https://cdn.jsdelivr.net/gh/automician/buttons-menu-custom-element@98902f0ad3f21fa6a2f3e0d1aa75b6f478557936/build/static/css/main.e5d0f3d9.css'\n      ],\n      hostCss:\n        ':host{display:block;position:relative;contain:content;}:host([hidden]){display:none;}' +\n        `\n        .wrapper {\n          width: auto;\n          margin: auto;\n          background-color: rgba(27,31,35,.05);\n          border-radius: 10px;\n          box-shadow: 0px 5px 15px rgba(0, 0, 0, .1);\n        }\n        \n        button {\n          letter-spacing: 0.75px;\n          border: none;\n          padding: 10px;\n          # background-color: #bccbe9;\n          background-color: rgba(27,31,35,.05);\n          # color: #8e9ead;\n          color: #778796;\n          font-size: 12px;\n          font-weight: 200;\n          cursor: pointer;\n          transition: 0.5s;\n        }\n        \n        button:hover {\n          #background-color: #d5e3ff;\n          background-color: rgba(0,183,206,0.1);\n        }\n        \n        button.active {\n          background-color: rgba(27,31,35,.05);\n          border-bottom: rgb(0,183,206) 1px solid;\n        }\n        \n        .active {\n          background-color: white;\n        }\n        \n        .content,.inline-content {\n          display: none;\n        }\n        \n        .content.active {\n          display: block;\n        }\n        \n        .inline-content.active {\n          display: inline;\n        }\n        `,\n      baseUrl: '',\n      gitlab: {\n        token: null,\n        projectId: null,\n        path: null,\n        branch: 'master',\n        ...window.ZeroMdConfig.gitlab\n      },\n      disableCodeHighlightingFor: [],\n      shortBreaksNumber: 2,\n      longBreaksNumber: 20,\n      anchorIdsToLowerCase: true,\n      indentInsideTocByPixels: 40,\n      imgBaseOld: './resources',\n      imgBaseNew: 'https://github.com/yashaka/taotaspy-resources/raw/master',\n      lang: null,\n      code: null,\n      groupCodeGroups: true,\n      pTagLang: undefined, // expect string with something like \"en-us\", \"ru\", etc...\n      ...defaults,\n      ...window.ZeroMdConfig\n    }\n    this.cache = {}\n    this.root = this.hasAttribute('no-shadow') ? this : this.attachShadow({ mode: 'open' })\n    if (!this.constructor.ready) {\n      this.constructor.ready = Promise.all([\n        !!window.marked || this.loadScript(this.config.markedUrl),\n        !!window.Prism || this.loadScript(this.config.prismUrl)\n      ])\n    }\n    this.clicked = this.clicked.bind(this)\n    if (!this.manualRender) {\n      // Scroll to hash id after first render. However, `history.scrollRestoration` inteferes with this\n      // on refresh. It's much better to use a `setTimeout` rather than to alter the browser's behaviour.\n      this.render().then(() => setTimeout(() => this.goto(location.hash), 250))\n    }\n    this.observer = new MutationObserver(async () => {\n      this.observeChanges()\n      if (!this.manualRender) {\n        await this.render()\n      }\n    })\n    this.observeChanges()\n  }\n\n  connectedCallback() {\n    this.connected = true\n    this.fire('zero-md-connected', {}, { bubbles: false, composed: false })\n    this.waitForReady().then(() => {\n      this.fire('zero-md-ready')\n    })\n    if (this.shadowRoot) {\n      this.shadowRoot.addEventListener('click', this.clicked)\n    }\n  }\n\n  disconnectedCallback() {\n    this.connected = false\n    if (this.shadowRoot) {\n      this.shadowRoot.removeEventListener('click', this.clicked)\n    }\n  }\n\n  waitForReady() {\n    const ready =\n      this.connected ||\n      new Promise((resolve) => {\n        this.addEventListener('zero-md-connected', function handler() {\n          this.removeEventListener('zero-md-connected', handler)\n          resolve()\n        })\n      })\n    return Promise.all([this.constructor.ready, ready])\n  }\n\n  // TODO: ensure this implementation is valid\n  waitForRendered() {\n    const rendered = new Promise((resolve) => {\n      this.addEventListener('zero-md-rendered', function handler() {\n        this.removeEventListener('zero-md-rendered', handler)\n        resolve()\n      })\n    })\n    return Promise.all([this.constructor.ready, rendered])\n  }\n\n  fire(name, detail = {}, opts = { bubbles: true, composed: true }) {\n    if (detail.msg) {\n      console.warn(detail.msg)\n    }\n    this.dispatchEvent(\n      new CustomEvent(name, {\n        detail: { node: this, ...detail },\n        ...opts\n      })\n    )\n  }\n\n  tick() {\n    return new Promise((resolve) => requestAnimationFrame(resolve))\n  }\n\n  // Coerce anything into an array\n  arrify(any) {\n    return any ? (Array.isArray(any) ? any : [any]) : []\n  }\n\n  // Promisify an element's onload callback\n  onload(node) {\n    return new Promise((resolve, reject) => {\n      node.onload = resolve\n      node.onerror = (err) => reject(err.path ? err.path[0] : err.composedPath()[0])\n    })\n  }\n\n  // Load a url or load (in order) an array of urls via <script> tags\n  loadScript(urls) {\n    return Promise.all(\n      this.arrify(urls).map((item) => {\n        const [url, ...attrs] = this.arrify(item)\n        const el = document.createElement('script')\n        el.src = url\n        el.async = false\n        attrs.forEach((attr) => el.setAttribute(attr, ''))\n        return this.onload(document.head.appendChild(el))\n      })\n    )\n  }\n\n  // Scroll to selected element\n  goto(id) {\n    if (id) {\n      const el = this.root.getElementById(id.substring(1))\n      if (el) {\n        el.scrollIntoView()\n      }\n    }\n  }\n\n  // Hijack same-doc anchor hash links\n  clicked(ev) {\n    if (ev.metaKey || ev.ctrlKey || ev.altKey || ev.shiftKey || ev.defaultPrevented) {\n      return\n    }\n    const a = ev.target.closest('a')\n    if (a && a.hash && a.host === location.host && a.pathname === location.pathname) {\n      this.goto(a.hash)\n    }\n  }\n\n  dedent(str) {\n    str = str.replace(/^\\n/, '')\n    const match = str.match(/^\\s+/)\n    return match ? str.replace(new RegExp(`^${match[0]}`, 'gm'), '') : str\n  }\n\n  getBaseUrl(src) {\n    const a = document.createElement('a')\n    a.href = src\n    return a.href.substring(0, a.href.lastIndexOf('/') + 1)\n  }\n\n  // Runs Prism highlight async; falls back to sync if Web Workers throw\n  highlight(container) {\n    return new Promise((resolve) => {\n      const unhinted = container.querySelectorAll('pre>code:not([class*=\"language-\"])')\n      unhinted.forEach((n) => {\n        // Dead simple language detection :)\n        const lang = n.innerText.match(/^\\s*</)\n          ? 'markup'\n          : n.innerText.match(/^\\s*(\\$|#)/)\n          ? 'bash'\n          : 'js'\n        n.classList.add(`language-${lang}`)\n      })\n      try {\n        window.Prism.highlightAllUnder(container, true, resolve())\n      } catch {\n        window.Prism.highlightAllUnder(container)\n        resolve()\n      }\n    })\n  }\n\n  // Converts HTML string into node\n  makeNode(html) {\n    const tpl = document.createElement('template')\n    tpl.innerHTML = html\n    return tpl.content.firstElementChild\n  }\n\n  // Construct styles dom and return HTML string\n  buildStyles() {\n    const get = (query) => {\n      const node = this.querySelector(query)\n      return node ? node.innerHTML || ' ' : ''\n    }\n    const urls = this.arrify(this.config.cssUrls)\n    const html = `<div class=\"markdown-styles\"><style>${this.config.hostCss}</style>${get(\n      'template[data-merge=\"prepend\"]'\n    )}${\n      get('template:not([data-merge])') ||\n      urls.reduce((a, c) => `${a}<link rel=\"stylesheet\" href=\"${c}\">`, '')\n    }${get('template[data-merge=\"append\"]')}</div>`\n    return html\n  }\n\n  // Construct md nodes and return HTML string\n  async buildMd(opts = {}) {\n    const renderer = new window.marked.Renderer()\n    let isOriginalUnderscoredBoldDisabled = undefined\n    let tocLinks = []\n\n    /* DEFINE HOW TO GET MD */\n\n    let isReadingFromGitlabConfigured = this.config.gitlab !== {}\n    let gitlabAbsoluteUrl = ''\n    const src = async () => {\n      if (!this.src && !this.path) {\n        return ''\n      }\n      const resp =\n        isReadingFromGitlabConfigured && this.path\n          ? await (async () => {\n              const id = this.config.gitlab.projectId\n              const branch = this.config.gitlab.branch\n              const absolutePath = encodeURIComponent(this.path.trim())\n              gitlabAbsoluteUrl = `https://gitlab.com/api/v4/projects/${id}/repository/files/${absolutePath}/raw?ref=${branch}`\n\n              return fetch(gitlabAbsoluteUrl, {\n                headers: {\n                  'PRIVATE-TOKEN': this.config.gitlab.token\n                }\n              })\n            })()\n          : await (async () => {\n              const url = this.src.trim()\n              gitlabAbsoluteUrl = url.startsWith('http') ? url : this.config.baseUrl + url\n\n              return fetch(gitlabAbsoluteUrl)\n            })()\n\n      if (resp.ok) {\n        return await resp.text()\n      } else {\n        this.fire('zero-md-error', {\n          msg: `[zero-md] HTTP error ${resp.status} while fetching src`,\n          status: resp.status,\n          src: this.src,\n          path: this.path,\n          lang: this.lang,\n          code: this.code\n        })\n        return ''\n      }\n    }\n    const script = () => {\n      const el = this.querySelector('script[type=\"text/markdown\"]')\n      if (!el) {\n        return ''\n      }\n      const md = el.hasAttribute('data-dedent') ? this.dedent(el.text) : el.text\n      return md\n    }\n\n    let md = (await src()) || script()\n\n    /* PROCESS MD */\n\n    const importsMatch = [...md.matchAll(/<!--import\\(([\\s\\S]*?)\\)-->/gim)]\n    if (importsMatch.length) {\n      await Promise.all(\n        importsMatch.map(async ([match, importURL]) => {\n          const currentZeroMdPath =\n            isReadingFromGitlabConfigured && this.path ? this.path : this.src\n          const currentZeroMdFileNestingDepth = currentZeroMdPath.split('/').length - 1\n\n          let response\n          const isUrlRelative = !importURL.startsWith('http')\n          if (isUrlRelative) {\n            const importedFileNestingMatch = importURL.match(/\\.{1,2}(?=[^/]*\\/)/gim)\n\n            if (\n              (importedFileNestingMatch &&\n                importedFileNestingMatch.length === 1 &&\n                importedFileNestingMatch[0] === '.') ||\n              importedFileNestingMatch === null\n            ) {\n              const thisPathLastElement = this.path.split('/').pop()\n              const filePathtoReplace = importedFileNestingMatch\n                ? importURL.split('./')[1]\n                : importURL.split('./')[0]\n\n              importURL = this.path.replace(thisPathLastElement, filePathtoReplace)\n            }\n\n            if (\n              importedFileNestingMatch &&\n              !(importedFileNestingMatch.length === 1 && importedFileNestingMatch[0] === '.')\n            ) {\n              const importedFileNestingDepth = importedFileNestingMatch.filter(\n                (item) => item === '..'\n              ).length\n\n              if (importedFileNestingDepth <= currentZeroMdFileNestingDepth) {\n                const importURLPurePath = importURL.replace(/^(\\.\\/|\\.\\.\\/)*/, '')\n                const importedFileFolderIndex =\n                  currentZeroMdFileNestingDepth - importedFileNestingDepth\n                importURL = currentZeroMdPath\n                  .split('/')\n                  .slice(0, importedFileFolderIndex)\n                  .concat(importURLPurePath)\n                  .join('/')\n              } else {\n                console.error('Provided relative path to the file does not exist')\n                return\n              }\n            }\n\n            // TODO: refactor for DRY (remove duplicated absolute url building logic)\n            const id = this.config.gitlab.projectId\n            const branch = this.config.gitlab.branch\n            const absolutePath = encodeURIComponent(importURL.trim())\n            gitlabAbsoluteUrl = `https://gitlab.com/api/v4/projects/${id}/repository/files/${absolutePath}/raw?ref=${branch}`\n\n            response = await fetch(gitlabAbsoluteUrl, {\n              headers: {\n                'PRIVATE-TOKEN': this.config.gitlab.token\n              }\n            })\n          } else {\n            response = await fetch(importURL)\n          }\n\n          if (response.ok) {\n            const importedContent = await response.text()\n            md = md.replace(match, importedContent)\n          }\n        })\n      )\n    }\n\n    const codalizedMatch = [\n      ...md.matchAll(\n        /<codalized( main=\"(js|ts|py|java|cs|kt|rb|kt|shell|sh|bash|bat|pwsh|text|md|yaml|json|html|xml)\")?\\/>/gim\n      )\n    ]\n    const [[shouldBeCodalized, __, defaultCodeFromMd]] = codalizedMatch.length\n      ? codalizedMatch\n      : [[]]\n\n    const localizedMatch = [...md.matchAll(/<localized( main=\"(uk|ru|en)\")?\\/>/gim)]\n    const [[shouldBeLocalized, _, defaultLangFromMd]] = localizedMatch.length\n      ? localizedMatch\n      : [[]]\n\n    const translationPerCodeOption =\n      /<!--((?:js|ts|java|py|cs|kt|rb|kt|shell|sh|bash|bat|pwsh|text|md|yaml|json|html|xml)(?:-(?:js|ts|java|py|cs|kt|rb|kt|shell|sh|bash|bat|pwsh|text|md|yaml|json|html|xml))*)((?![-])\\W)(.*?)\\2(.*?)\\2-->/gim\n    ;[...md.matchAll(translationPerCodeOption)].forEach(([_, perCode, __, from, to]) => {\n      if (perCode.split('-').length > 1) {\n        perCode = perCode.split('-')\n      }\n\n      if (\n        perCode instanceof Array\n          ? perCode.includes(this.code || defaultCodeFromMd)\n          : (this.code || defaultCodeFromMd) === perCode\n      ) {\n        md = md.replace(new RegExp(from, 'gmi'), to)\n      }\n    })\n\n    const translationPerLangOption =\n      /<!--((?:uk|ru|en)(?:-(?:uk|ru|en))*)((?![-])\\W)(.*?)\\2(.*?)\\2-->/gim\n    ;[...md.matchAll(translationPerLangOption)].forEach(([_, perLang, __, from, to]) => {\n      if (perLang.split('-').length > 1) {\n        perLang = perLang.split('-')\n      }\n\n      if (\n        perLang instanceof Array\n          ? perLang.includes(this.lang || defaultLangFromMd)\n          : (this.lang || defaultLangFromMd) === perLang\n      ) {\n        md = md.replace(new RegExp(from, 'gmi'), to)\n      }\n    })\n\n    if (shouldBeCodalized) {\n      const codalized =\n        /<((not-)?(js|ts|py|java|cs|kt|rb|kt|shell|sh|bash|bat|pwsh|text|md|yaml|json|html|xml)(-js|-ts|-py|-java|-cs|-kt|-rb|-kt|-shell|-sh|-bash|-bat|-pwsh|-text|-md|-yaml|-json|-html|-xml)*)>([\\s\\S]*?)<\\/\\1>/gim\n      md = md.replace(codalized, (match, $1, inverted, ___, ____, $5) => {\n        const tag = $1\n        const content = $5\n        const candidates = inverted ? tag.split('-').slice(1) : tag.split('-')\n        return `<span class=\"inline-content${\n          inverted\n            ? candidates.includes(this.code || defaultCodeFromMd)\n              ? ''\n              : ' active'\n            : candidates.includes(this.code || defaultCodeFromMd)\n            ? ' active'\n            : ''\n        }\" id=\"${tag}\">${content}</span>` // TODO: should we make here id value dependent on inverted?\n      })\n    }\n\n    if (shouldBeLocalized) {\n      const localized = /<((uk|ru|en)(-uk|-ru|-en)*)>([\\s\\S]*?)<\\/\\1>/gim\n      md = md.replace(localized, (match, $1, __, ___, $4) => {\n        const candidates = $1.split('-')\n        const content = $4\n        return candidates.includes(this.lang || defaultLangFromMd) ? content : ''\n      })\n    }\n\n    const tocStartLevelOption = /<!--TOC>(\\d)-->/i\n    const [, tocStartLevel] = md.match(tocStartLevelOption) || [null, 0]\n    renderer.heading = (text, level) => {\n      const [, pure, userId] = text.match(/^(.*)?\\s*{#(.*)}$/im) || [null, text]\n      const pureWithoutTags = pure.replace(/<\\/?\\w+>/g, '')\n      const anchorIdsToLowerCase = this.config.anchorIdsToLowerCase\n      const id =\n        userId ||\n        (anchorIdsToLowerCase ? IDfy(pureWithoutTags) : IDfy(pureWithoutTags, { lowerCase: false }))\n      const pixelsNumber = this.config.indentInsideTocByPixels\n\n      if (level > tocStartLevel) {\n        const indentInsideToc = `style=\"margin-left: ${\n          pixelsNumber * (level - 1 - tocStartLevel)\n        }px\"`\n        tocLinks.push(`<div ${indentInsideToc}><a href=\"#${id}\">${pureWithoutTags}</a></div>`)\n      }\n\n      return `<h${level}>${encodeURI(id) === id ? '' : `<span id=\"${encodeURI(id)}\"></span>`}\n          <a id=\"${id}\" class=\"anchor\" aria-hidden=\"true\" href=\"#${id}\"></a>${pure}</h${level}>`\n    }\n\n    const imgBase = /]\\(\\.\\.?\\/resources/gim // todo: move ../resources to config\n    md = md.replace(imgBase, '](' + this.config.imgBaseNew)\n\n    const shortBreaks = /^,,,,+/gim\n    md = md.replace(shortBreaks, '<br/>'.repeat(this.config.shortBreaksNumber))\n\n    const longBreaks = /^====+/gim\n    md = md.replace(longBreaks, '<br/>'.repeat(this.config.longBreaksNumber))\n\n    const pageBreaks = /^===/gim\n    md = md.replace(pageBreaks, '<div style=\"page-break-after: always;\"></div>')\n\n    this.config.disableCodeHighlightingFor.forEach((lang) => {\n      md = md.replace(new RegExp(`\\`\\`\\`${lang}`, 'gim'), '```')\n    })\n\n    const articleTypeExtension = /\\.(\\w+)\\.md(\\)|#)/gim\n    md = md.replace(articleTypeExtension, `-$1.md$2`)\n\n    // todo: fix to skip links that start with http\n    const mdExtensions = /\\.md\\)/gim\n    md = md.replace(mdExtensions, `-md${window.location.search})`)\n\n    const mdExtensionsWithId = /\\.md#/gim\n    md = md.replace(mdExtensionsWithId, `-md${window.location.search}#`)\n\n    const poetryBoldOption = /<!--(.+)poetryBold(.+)-->/i\n    const [, poetryBoldStart, poetryBoldEnd] = md.match(poetryBoldOption) || [null, '__', '__']\n\n    const tabNameOption = /<!--(.+)tabNameBrackets(.+)-->/i\n    const [, tabNameStart, tabNameEnd] = md.match(tabNameOption) || [null, '\"', '\"']\n\n    const boldRegExpRule = [\n      new RegExp(`${poetryBoldStart}(.*?)${poetryBoldEnd}`, 'gmi'),\n      '<b>$1</b>'\n    ]\n    // todo: change to ```poetry ... ``` style\n    const poetries = /---[a-z]*\\n([\\s\\S]*?)\\n---/gim\n    // const backTickPoetries = /```poetry[a-z]*\\n([\\s\\S]*?)\\n```/gim\n    // const backTickPoetries = /```poetry(:?( [a-z]+)+)?\\n([\\s\\S]*?)\\n```/gim;\n    const backTickPoetries = /```poetry: (.+)\\n([\\s\\S]*?)\\n```/gim\n    const poetryRules = [\n      [/(___)(.*?)\\1/gim, '<em>$2</em>'], //emphasis\n\n      boldRegExpRule, //bold1\n      [/(\\*\\*)(.*?)\\1/gim, '<b>$2</b>'], //bold2\n\n      // [/^(?!.*\\/\\*.*$).*(\\*)(.*?)\\1/gmi,      '<em>$2</em>'], //emphasis\n      // TODO: fix: does not work for lines: ... * ... * ... /* ... */ ...\n      // read for more info:\n      //    https://stackoverflow.com/questions/7376238/javascript-regex-look-behind-alternative\n\n      [/(____)(.*?)\\1/gim, '<span style=\"text-decoration:underline\">$2</span>'] //underlined\n    ]\n    isOriginalUnderscoredBoldDisabled = poetryBoldStart !== '__'\n    const processPoetry = (rules) => (match, $1, code) => {\n      const [...tabNamesArray] = $1.matchAll(\n        new RegExp('\\\\w+' + tabNameStart + '[\\\\w\\\\d\\\\s\\\\S]*?' + tabNameEnd + '|(\\\\S+)', 'gim')\n      )\n\n      const [langs, customNames] = tabNamesArray.reduce(\n        ([langs, customNames], [lang]) => {\n          let customName = null\n\n          if (lang.includes(tabNameStart)) {\n            customName = (() => {\n              const [[__, customName]] = lang.matchAll(\n                new RegExp(tabNameStart + '([\\\\w\\\\d\\\\s\\\\S]*?)' + tabNameEnd, 'gim')\n              )\n\n              return customName\n            })()\n\n            lang = lang.split(tabNameStart)[0]\n          }\n\n          return [\n            [...langs, lang],\n            [...customNames, customName]\n          ]\n        },\n        [[], []]\n      )\n\n      let res = code\n\n      for (const rule of rules) {\n        res = res.replace(rule[0], rule[1])\n      }\n\n      if (isOriginalUnderscoredBoldDisabled) {\n        res.replace(/(__)(.*?)\\1/gim, '‡‡‡$2‡‡‡') // to encode original __\n      }\n\n      // return `<pre><code>${res}</code></pre>`;\n      return langs\n        ? langs\n            .map(\n              (lang, index) =>\n                `<pre><code class=\"language-${lang}\" poetry ${\n                  customNames[index] ? `data-customname=\"${customNames[index]}\"` : ''\n                }>${res}</code></pre>`\n            )\n            .join('\\n')\n        : `<pre>${res}</pre>`\n    }\n\n    md = md.replace(poetries, processPoetry(poetryRules))\n    md = md.replace(backTickPoetries, processPoetry(poetryRules))\n\n    const multiCodeBlocks = /```(([a-z]+)( [a-z]+)+)\\n([\\s\\S]*?)\\n```/gim\n    md = md.replace(multiCodeBlocks, (match, $1, __, ___, $4) => {\n      const langs = $1.split(' ')\n      const code = $4\n      return langs.map((lang) => `\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``).join('\\n')\n    })\n\n    const customNameTabBlocks = new RegExp(\n      '```(\\\\w+): ' + tabNameStart + '([\\\\s\\\\S]+?)' + tabNameEnd + '\\n([\\\\s\\\\S]*?)```',\n      'gim'\n    )\n    const [...customNameTabs] = [...md.matchAll(customNameTabBlocks)]\n    customNameTabs.forEach(([match, lang, customName, code]) => {\n      md = md.replace(\n        match,\n        `<pre><code class=\"language-${lang}\" data-customname=\"${customName}\">${code}</code></pre>`\n      )\n    })\n\n    /* GET HTML */\n\n    let html = window.marked(md, {\n      baseUrl: this.getBaseUrl(window.location.href),\n      renderer,\n      ...opts\n    })\n\n    /* PROCESS HTML */\n\n    if (isOriginalUnderscoredBoldDisabled) {\n      html = html.replace(/‡‡‡/gim, '__')\n    }\n\n    const tocMarker = /\\[toc\\]/i\n    const toc = `<div class=\"toc\">${tocLinks.join('')}</div>`\n    html = html.replace(tocMarker, toc)\n\n    const codeGroups = /<p>(:::+)(manual)?<\\/p>([\\s\\S]*?)<p>\\1<\\/p>/gim\n    const processCodeGroup = (match, $1, manual, $3) => {\n      const items = $3\n\n      const itemMarker =\n        /<pre><code class=\"language-(\\w+)\"( poetry)?( data-customname=.(.+).)?.*?>([\\s\\S]*?)<\\/code><\\/pre>/gim\n\n      let [itemsContent, itemsTitles] = [...items.matchAll(itemMarker)].reduce(\n        ([content, titles], [match, title, poetry, __, customName, inner]) => {\n          customName ? (title = [title, customName]) : (title = [title])\n\n          return [\n            [...content, poetry ? `<pre>${inner}</pre>` : match],\n            [...titles, title]\n          ]\n        },\n        [[], []]\n      )\n\n      const code = this.code\n      let uniqueTitlesArray = []\n      return `\n          <div class=\"wrapper\">\n            <div class=\"buttonWrapper\">\n              ${itemsTitles\n                .map((title, index) => {\n                  let duplicatedTitle = false\n                  // TODO: name it and find good proper name\n                  // const codeLikeTitle = title[0]\n                  // const customName = title[1]\n                  uniqueTitlesArray.includes(title[0])\n                    ? (duplicatedTitle = true)\n                    : uniqueTitlesArray.push(title[0])\n\n                  return `<button class=\"tab-button${\n                    manual\n                      ? index === 0\n                        ? ' active'\n                        : ''\n                      : (code ? code === IDfy(title[0]) && !duplicatedTitle : index === 0)\n                      ? ' active'\n                      : ''\n                  }\" data-id=\"${IDfy(title.length > 1 ? title[0] + '_' + title[1] : title[0])}\">${\n                    title.length > 1 ? title[1] : title[0]\n                  }</button>`\n                })\n                .join('\\n')}\n            </div>\n            <div class=\"contentWrapper\">\n              ${itemsContent\n                .map((item, index) => {\n                  let duplicatedTitle = false\n                  const title = itemsTitles[index]\n                  index === 0 ? (uniqueTitlesArray = []) : null\n                  uniqueTitlesArray.includes(title[0])\n                    ? (duplicatedTitle = true)\n                    : uniqueTitlesArray.push(title[0])\n\n                  return `<div class=\"content${\n                    manual\n                      ? index === 0\n                        ? ' active'\n                        : ''\n                      : (code ? code === IDfy(title[0]) && !duplicatedTitle : index === 0)\n                      ? ' active'\n                      : ''\n                  }\" id=\"${IDfy(\n                    title.length > 1 ? title[0] + '_' + title[1] : title[0]\n                  )}\">${item}</div>`\n                })\n                .join('\\n')}\n            </div>\n          </div>\n          `.trim()\n    }\n\n    html = html.replace(codeGroups, processCodeGroup)\n\n    const languageJsMarker = /<pre><code class=\"language-(js|javascript)\"/gim\n    html = html.replace(languageJsMarker, '<pre><code class=\"language-typescript\"')\n\n    return `<div class=\"markdown-body${\n      opts.classes ? this.arrify(opts.classes).reduce((a, c) => `${a} ${c}`, ' ') : ''\n    }\">${html}</div>`\n  }\n\n  // Insert or replace HTML styles string into DOM and wait for links to load\n  async stampStyles(html) {\n    const node = this.makeNode(html)\n    const links = [...node.querySelectorAll('link[rel=\"stylesheet\"]')]\n    const target = [...this.root.children].find((n) => n.classList.contains('markdown-styles'))\n    if (target) {\n      target.replaceWith(node)\n    } else {\n      this.root.prepend(node)\n    }\n    await Promise.all(links.map((l) => this.onload(l))).catch((err) => {\n      this.fire('zero-md-error', {\n        msg: '[zero-md] An external stylesheet failed to load',\n        status: undefined,\n        src: err.href\n      })\n    })\n  }\n\n  // Insert or replace HTML body string into DOM and returns the node\n  stampBody(html) {\n    const node = this.makeNode(html)\n    const target = [...this.root.children].find((n) => n.classList.contains('markdown-body'))\n    if (target) {\n      target.replaceWith(node)\n    } else {\n      this.root.append(node)\n    }\n    return node\n  }\n\n  // Start observing for changes in root, templates and scripts\n  observeChanges() {\n    this.observer.observe(this, { childList: true })\n    this.querySelectorAll('template,script[type=\"text/markdown\"]').forEach((n) => {\n      this.observer.observe(n.content || n, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        characterData: true\n      })\n    })\n  }\n\n  async render(opts = {}) {\n    await this.waitForReady()\n    const stamped = {}\n    const pending = this.buildMd(opts)\n    const css = this.buildStyles()\n    if (css !== this.cache.styles) {\n      this.cache.styles = css\n      await this.stampStyles(css)\n      stamped.styles = true\n      await this.tick()\n    }\n    const md = await pending\n    if (md !== this.cache.body) {\n      this.cache.body = md\n      const node = this.stampBody(md)\n\n      /* PROCESS CODE GROUP - START */\n      const tabsWrappers = node.querySelectorAll('.wrapper')\n      tabsWrappers.forEach(\n        (tabsWrapper) =>\n          (tabsWrapper.onclick = (e) => {\n            const element = e.target\n            const newActiveContentId = element.dataset.id\n            const isElementANonActiveTabButton =\n              !!newActiveContentId && !element.classList.contains('active')\n\n            if (isElementANonActiveTabButton) {\n              if (this.config.groupCodeGroups) {\n                node.querySelectorAll('.wrapper .tab-button').forEach((tabButton) => {\n                  if (tabButton.dataset.id === newActiveContentId) {\n                    tabButton.classList.add('active')\n                  } else {\n                    tabButton.classList.remove('active')\n                  }\n                })\n\n                node.querySelectorAll(`.content,.inline-content`).forEach((content) => {\n                  if (content.id.split('-').includes(newActiveContentId)) {\n                    content.classList.add('active')\n                  } else {\n                    content.classList.remove('active')\n                  }\n                })\n              } else {\n                const buttonsWrapper = element.parentElement\n                buttonsWrapper.querySelector('.tab-button.active').classList.remove('active')\n                element.classList.add('active')\n\n                const wrapper = buttonsWrapper.parentElement\n                const contents = wrapper.querySelectorAll('.content')\n                contents.forEach((content) => {\n                  content.classList.remove('active')\n                })\n                wrapper.querySelector(`#${newActiveContentId}`).classList.add('active')\n              }\n            }\n          })\n      )\n      /* PROCESS CODE GROUP - END */\n\n      stamped.body = true\n      await this.highlight(node)\n    }\n\n    this.fire('zero-md-rendered', { stamped })\n  }\n}\ncustomElements.define('zero-md', ZeroMd)\n"],"names":["notAUnicodeWord","IDfy","name","options","lowerCase","replace","its","with","toLowerCase","ZeroMd","HTMLElement","src","this","getAttribute","path","lang","URLSearchParams","window","location","search","get","config","code","val","reflect","manualRender","hasAttribute","removeAttribute","setAttribute","observedAttributes","attributeChangedCallback","old","connected","render","constructor","defaults","super","version","markedUrl","prismUrl","cssUrls","hostCss","baseUrl","gitlab","token","projectId","branch","ZeroMdConfig","disableCodeHighlightingFor","shortBreaksNumber","longBreaksNumber","anchorIdsToLowerCase","indentInsideTocByPixels","imgBaseOld","imgBaseNew","groupCodeGroups","pTagLang","undefined","cache","root","attachShadow","mode","ready","Promise","all","marked","loadScript","Prism","clicked","bind","then","setTimeout","goto","hash","observer","MutationObserver","async","observeChanges","connectedCallback","fire","bubbles","composed","waitForReady","shadowRoot","addEventListener","disconnectedCallback","removeEventListener","resolve","handler","waitForRendered","rendered","detail","opts","msg","console","warn","dispatchEvent","CustomEvent","node","tick","requestAnimationFrame","arrify","any","Array","isArray","onload","reject","onerror","err","composedPath","urls","map","item","url","attrs","el","document","createElement","forEach","attr","head","appendChild","id","getElementById","substring","scrollIntoView","ev","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","a","target","closest","host","pathname","dedent","str","match","RegExp","getBaseUrl","href","lastIndexOf","highlight","container","querySelectorAll","n","innerText","classList","add","highlightAllUnder","makeNode","html","tpl","innerHTML","content","firstElementChild","buildStyles","query","querySelector","reduce","c","renderer","Renderer","isOriginalUnderscoredBoldDisabled","tocLinks","isReadingFromGitlabConfigured","gitlabAbsoluteUrl","md","resp","absolutePath","encodeURIComponent","trim","fetch","headers","startsWith","ok","text","status","script","importsMatch","matchAll","length","importURL","currentZeroMdPath","currentZeroMdFileNestingDepth","split","response","importedFileNestingMatch","thisPathLastElement","pop","filePathtoReplace","importedFileNestingDepth","filter","error","importURLPurePath","importedFileFolderIndex","slice","concat","join","importedContent","codalizedMatch","shouldBeCodalized","__","defaultCodeFromMd","localizedMatch","shouldBeLocalized","_","defaultLangFromMd","perCode","from","to","includes","perLang","codalized","$1","inverted","___","____","$5","tag","candidates","localized","$4","tocStartLevel","heading","level","pure","userId","pureWithoutTags","pixelsNumber","indentInsideToc","push","encodeURI","repeat","poetryBoldStart","poetryBoldEnd","tabNameStart","tabNameEnd","poetryRules","processPoetry","rules","tabNamesArray","langs","customNames","customName","res","rule","index","customNameTabBlocks","customNameTabs","toc","manual","$3","items","itemsContent","itemsTitles","titles","title","poetry","inner","uniqueTitlesArray","duplicatedTitle","classes","links","children","find","contains","replaceWith","prepend","l","catch","stampBody","append","observe","childList","subtree","attributes","characterData","stamped","pending","buildMd","css","styles","stampStyles","body","tabsWrapper","onclick","e","element","newActiveContentId","dataset","tabButton","remove","buttonsWrapper","parentElement","wrapper","customElements","define"],"mappings":"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"}
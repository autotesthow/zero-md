{"version":3,"file":"zero-md.legacy.min.js","sources":["../src/utils/IDfy.js","../src/index.js"],"sourcesContent":["const notAUnicodeWord =\n  /[^_0-9a-zA-Z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]+/g\n\nexport default function IDfy(\n  name,\n  options = { lowerCase: true, replace: { its: notAUnicodeWord, with: '-' } }\n) {\n  return options.lowerCase\n    ? name.toLowerCase().replace(options.replace.its, options.replace.with)\n    : name.replace(options.replace.its, options.replace.with)\n}\n","import IDfy from './utils/IDfy'\n\nexport class ZeroMd extends HTMLElement {\n  get src() {\n    return this.getAttribute('src')\n  }\n\n  get path() {\n    return this.getAttribute('path')\n  }\n\n  get lang() {\n    return (\n      new URLSearchParams(window.location.search).get('lang') ||\n      this.getAttribute('lang') ||\n      this.config.lang\n    )\n  }\n\n  get code() {\n    return (\n      new URLSearchParams(window.location.search).get('code') ||\n      this.getAttribute('code') ||\n      this.config.code\n    )\n  }\n\n  set src(val) {\n    this.reflect('src', val);\n  }\n\n  set path(val) {\n    this.reflect('path', val);\n  }\n\n  set lang(val) {\n    this.reflect('lang', val);\n  }\n\n  set code(val) {\n    this.reflect('code', val);\n  }\n\n  get manualRender() {\n    return this.hasAttribute('manual-render')\n  }\n\n  set manualRender(val) {\n    this.reflect('manual-render', val);\n  }\n\n  reflect(name, val) {\n    if (val === false) {\n      this.removeAttribute(name);\n    } else {\n      this.setAttribute(name, val === true ? '' : val);\n    }\n  }\n\n  static get observedAttributes() {\n    return ['src', 'path', 'lang', 'code']\n  }\n\n  attributeChangedCallback(name, old, val) {\n    if (\n      (name === 'src' || name === 'path' || name === 'lang' || name === 'code') &&\n      this.connected &&\n      !this.manualRender &&\n      val !== old\n    ) {\n      this.render();\n    }\n  }\n\n  constructor(defaults) {\n    super();\n    this.version = '$VERSION';\n    this.config = {\n      markedUrl: 'https://cdn.jsdelivr.net/gh/markedjs/marked@2/marked.min.js',\n      prismUrl: [\n        ['https://cdn.jsdelivr.net/gh/PrismJS/prism@1/prism.min.js', 'data-manual'],\n        'https://cdn.jsdelivr.net/gh/PrismJS/prism@1/plugins/autoloader/prism-autoloader.min.js'\n      ],\n      cssUrls: [\n        'https://cdn.jsdelivr.net/gh/sindresorhus/github-markdown-css@4/github-markdown.min.css',\n        'https://cdn.jsdelivr.net/gh/PrismJS/prism@1/themes/prism.min.css',\n        'https://cdn.jsdelivr.net/gh/automician/buttons-menu-custom-element@98902f0ad3f21fa6a2f3e0d1aa75b6f478557936/build/static/css/main.e5d0f3d9.css'\n      ],\n      hostCss:\n        ':host{display:block;position:relative;contain:content;}:host([hidden]){display:none;}' +\n        `\n        .wrapper {\n          width: auto;\n          margin: auto;\n          background-color: rgba(27,31,35,.05);\n          border-radius: 10px;\n          box-shadow: 0px 5px 15px rgba(0, 0, 0, .1);\n        }\n        \n        button {\n          letter-spacing: 0.75px;\n          border: none;\n          padding: 10px;\n          # background-color: #bccbe9;\n          background-color: rgba(27,31,35,.05);\n          # color: #8e9ead;\n          color: #778796;\n          font-size: 12px;\n          font-weight: 200;\n          cursor: pointer;\n          transition: 0.5s;\n        }\n        \n        button:hover {\n          #background-color: #d5e3ff;\n          background-color: rgba(0,183,206,0.1);\n        }\n        \n        button.active {\n          background-color: rgba(27,31,35,.05);\n          border-bottom: rgb(0,183,206) 1px solid;\n        }\n        \n        .active {\n          background-color: white;\n        }\n        \n        .content,.inline-content {\n          display: none;\n        }\n        \n        .content.active {\n          display: block;\n        }\n        \n        .inline-content.active {\n          display: inline;\n        }\n        `,\n      baseUrl: '',\n      gitlab: {\n        token: null,\n        projectId: null,\n        path: null,\n        branch: 'master',\n        ...window.ZeroMdConfig.gitlab\n      },\n      disableCodeHighlightingFor: [],\n      shortBreaksNumber: 2,\n      longBreaksNumber: 20,\n      anchorIdsToLowerCase: true,\n      indentInsideTocByPixels: 40,\n      imgBaseOld: './resources',\n      imgBaseNew: 'https://github.com/yashaka/taotaspy-resources/raw/master',\n      lang: null,\n      code: null,\n      groupCodeGroups: true,\n      pTagLang: undefined, // expect string with something like \"en-us\", \"ru\", etc...\n      ...defaults,\n      ...window.ZeroMdConfig\n    };\n    this.cache = {};\n    this.root = this.hasAttribute('no-shadow') ? this : this.attachShadow({ mode: 'open' });\n    if (!this.constructor.ready) {\n      this.constructor.ready = Promise.all([\n        !!window.marked || this.loadScript(this.config.markedUrl),\n        !!window.Prism || this.loadScript(this.config.prismUrl)\n      ]);\n    }\n    this.clicked = this.clicked.bind(this);\n    if (!this.manualRender) {\n      // Scroll to hash id after first render. However, `history.scrollRestoration` inteferes with this\n      // on refresh. It's much better to use a `setTimeout` rather than to alter the browser's behaviour.\n      this.render().then(() => setTimeout(() => this.goto(location.hash), 250));\n    }\n    this.observer = new MutationObserver(async () => {\n      this.observeChanges();\n      if (!this.manualRender) {\n        await this.render();\n      }\n    });\n    this.observeChanges();\n  }\n\n  connectedCallback() {\n    this.connected = true;\n    this.fire('zero-md-connected', {}, { bubbles: false, composed: false });\n    this.waitForReady().then(() => {\n      this.fire('zero-md-ready');\n    });\n    if (this.shadowRoot) {\n      this.shadowRoot.addEventListener('click', this.clicked);\n    }\n  }\n\n  disconnectedCallback() {\n    this.connected = false;\n    if (this.shadowRoot) {\n      this.shadowRoot.removeEventListener('click', this.clicked);\n    }\n  }\n\n  waitForReady() {\n    const ready =\n      this.connected ||\n      new Promise((resolve) => {\n        this.addEventListener('zero-md-connected', function handler() {\n          this.removeEventListener('zero-md-connected', handler);\n          resolve();\n        });\n      });\n    return Promise.all([this.constructor.ready, ready])\n  }\n\n  fire(name, detail = {}, opts = { bubbles: true, composed: true }) {\n    if (detail.msg) {\n      console.warn(detail.msg);\n    }\n    this.dispatchEvent(\n      new CustomEvent(name, {\n        detail: { node: this, ...detail },\n        ...opts\n      })\n    );\n  }\n\n  tick() {\n    return new Promise((resolve) => requestAnimationFrame(resolve))\n  }\n\n  // Coerce anything into an array\n  arrify(any) {\n    return any ? (Array.isArray(any) ? any : [any]) : []\n  }\n\n  // Promisify an element's onload callback\n  onload(node) {\n    return new Promise((resolve, reject) => {\n      node.onload = resolve;\n      node.onerror = (err) => reject(err.path ? err.path[0] : err.composedPath()[0]);\n    })\n  }\n\n  // Load a url or load (in order) an array of urls via <script> tags\n  loadScript(urls) {\n    return Promise.all(\n      this.arrify(urls).map((item) => {\n        const [url, ...attrs] = this.arrify(item);\n        const el = document.createElement('script');\n        el.src = url;\n        el.async = false;\n        attrs.forEach((attr) => el.setAttribute(attr, ''));\n        return this.onload(document.head.appendChild(el))\n      })\n    )\n  }\n\n  // Scroll to selected element\n  goto(id) {\n    if (id) {\n      const el = this.root.getElementById(id.substring(1));\n      if (el) {\n        el.scrollIntoView();\n      }\n    }\n  }\n\n  // Hijack same-doc anchor hash links\n  clicked(ev) {\n    if (ev.metaKey || ev.ctrlKey || ev.altKey || ev.shiftKey || ev.defaultPrevented) {\n      return\n    }\n    const a = ev.target.closest('a');\n    if (a && a.hash && a.host === location.host && a.pathname === location.pathname) {\n      this.goto(a.hash);\n    }\n  }\n\n  dedent(str) {\n    str = str.replace(/^\\n/, '');\n    const match = str.match(/^\\s+/);\n    return match ? str.replace(new RegExp(`^${match[0]}`, 'gm'), '') : str\n  }\n\n  getBaseUrl(src) {\n    const a = document.createElement('a');\n    a.href = src;\n    return a.href.substring(0, a.href.lastIndexOf('/') + 1)\n  }\n\n  // Runs Prism highlight async; falls back to sync if Web Workers throw\n  highlight(container) {\n    return new Promise((resolve) => {\n      const unhinted = container.querySelectorAll('pre>code:not([class*=\"language-\"])');\n      unhinted.forEach((n) => {\n        // Dead simple language detection :)\n        const lang = n.innerText.match(/^\\s*</)\n          ? 'markup'\n          : n.innerText.match(/^\\s*(\\$|#)/)\n          ? 'bash'\n          : 'js';\n        n.classList.add(`language-${lang}`);\n      });\n      try {\n        window.Prism.highlightAllUnder(container, true, resolve());\n      } catch {\n        window.Prism.highlightAllUnder(container);\n        resolve();\n      }\n    })\n  }\n\n  // Converts HTML string into node\n  makeNode(html) {\n    const tpl = document.createElement('template');\n    tpl.innerHTML = html;\n    return tpl.content.firstElementChild\n  }\n\n  // Construct styles dom and return HTML string\n  buildStyles() {\n    const get = (query) => {\n      const node = this.querySelector(query);\n      return node ? node.innerHTML || ' ' : ''\n    };\n    const urls = this.arrify(this.config.cssUrls);\n    const html = `<div class=\"markdown-styles\"><style>${this.config.hostCss}</style>${get(\n      'template[data-merge=\"prepend\"]'\n    )}${\n      get('template:not([data-merge])') ||\n      urls.reduce((a, c) => `${a}<link rel=\"stylesheet\" href=\"${c}\">`, '')\n    }${get('template[data-merge=\"append\"]')}</div>`;\n    return html\n  }\n\n  // Construct md nodes and return HTML string\n  async buildMd(opts = {}) {\n    const src = async () => {\n      if (!this.src && !this.path) {\n        return ''\n      }\n\n      let absoluteUrl = '';\n      let isReadingFromGitlabConfigured = this.config.gitlab !== {};\n      const resp =\n        isReadingFromGitlabConfigured && this.path\n          ? await (async () => {\n              const id = this.config.gitlab.projectId;\n              const branch = this.config.gitlab.branch;\n              const absolutePath = encodeURIComponent(this.path.trim());\n              absoluteUrl = `https://gitlab.com/api/v4/projects/${id}/repository/files/${absolutePath}/raw?ref=${branch}`;\n\n              return fetch(absoluteUrl, {\n                headers: {\n                  'PRIVATE-TOKEN': this.config.gitlab.token\n                }\n              })\n            })()\n          : await (async () => {\n              const url = this.src.trim();\n              absoluteUrl = url.startsWith('http') ? url : this.config.baseUrl + url;\n\n              return fetch(absoluteUrl)\n            })();\n\n      if (resp.ok) {\n        let md = await resp.text();\n\n      /* IMPORT SETTINGS FROM OUTER FILE */\n      const importsMatch = [...md.matchAll(/<!--import\\(([\\s\\S]*?)\\)-->/gim)];\n      \n      if (importsMatch.length) {\n        await Promise.all(importsMatch.map( async ([match, importURL]) => {\n          const currentZeroMdPath = (isReadingFromGitlabConfigured && this.path) ? this.path : this.src\n          const currentZeroMdFileNestingDepth = currentZeroMdPath.split('/').length - 1\n\n          let response\n          if (!importURL.startsWith('http')) {\n            const importedFileNestingMatch = importURL.match(/\\.{1,2}(?=[^/]*\\/)/gim)\n\n            if ((importedFileNestingMatch && importedFileNestingMatch.length === 1 && importedFileNestingMatch[0] === '.') \n              || importedFileNestingMatch === null) {\n              const thisPathLastElement = this.path.split('/').pop()\n              const filePathtoReplace =  importedFileNestingMatch ? importURL.split('./')[1] : importURL.split('./')[0]\n              \n              importURL =  this.path.replace(thisPathLastElement, filePathtoReplace)\n            }\n\n            if (importedFileNestingMatch && !(importedFileNestingMatch.length === 1 && importedFileNestingMatch[0] === '.')) {\n              const importedFileNestingDepth = importedFileNestingMatch.filter((item) => item === '..').length\n\n              if (importedFileNestingDepth <= currentZeroMdFileNestingDepth) {\n                const importURLPurePath = importURL.replace(/^(\\.\\/|\\.\\.\\/)*/, '')\n                const importedFileFolderIndex = currentZeroMdFileNestingDepth - importedFileNestingDepth\n                importURL = currentZeroMdPath.split('/').slice(0, importedFileFolderIndex).concat(importURLPurePath).join('/')\n              }  else {\n                console.error('Wrong path to the file')\n                return\n              }\n            }\n            \n            const id = this.config.gitlab.projectId;\n            const branch = this.config.gitlab.branch;\n            const absolutePath = encodeURIComponent(importURL.trim());\n            absoluteUrl = `https://gitlab.com/api/v4/projects/${id}/repository/files/${absolutePath}/raw?ref=${branch}`;\n            \n            response = await fetch(absoluteUrl, {\n              headers: {\n                'PRIVATE-TOKEN': this.config.gitlab.token,\n              }\n            })\n          } else {\n            response = await fetch(importURL);\n          }\n\n          if (response.ok) {\n            const importedContent = await response.text();\n            md = md.replace(match, importedContent)\n          }\n        }))\n      }\n\n        /* PROCESS MD */\n        const renderer = new window.marked.Renderer();\n\n        const codalizedMatch = [...md.matchAll(/<codalized( main=\"(js|ts|py|java|cs)\")?\\/>/gim)];\n        const [[shouldBeCodalized, __, defaultCodeFromMd]] = codalizedMatch.length\n          ? codalizedMatch\n          : [[]];\n\n        const localizedMatch = [...md.matchAll(/<localized( main=\"(uk|ru|en)\")?\\/>/gim)];\n        const [[shouldBeLocalized, _, defaultLangFromMd]] = localizedMatch.length\n          ? localizedMatch\n          : [[]];\n\n        const translationPerCodeOption = /<!--((?:js|ts|java|py|cs)(?:-(?:js|ts|java|py|cs))*)((?![-])\\W)(.*?)\\2(.*?)\\2-->/gim\n        ;[...md.matchAll(translationPerCodeOption)].forEach(([match, perCode, __, from, to]) => {\n      \n          if (perCode.split('-').length > 1) {\n            perCode = perCode.split('-')\n          }\n\n          if (perCode instanceof Array ? perCode.includes(this.code || defaultCodeFromMd) : (this.code || defaultCodeFromMd) === perCode) {\n            md = md.replace(new RegExp(from, 'gmi'), to);\n          }\n        });\n\n        const translationPerLangOption = /<!--((?:uk|ru|en)(?:-(?:uk|ru|en))*)((?![-])\\W)(.*?)\\2(.*?)\\2-->/gim\n        ;[...md.matchAll(translationPerLangOption)].forEach(([match, perLang, __, from, to]) => {\n\n          if (perLang.split('-').length > 1) {\n            perLang = perLang.split('-')\n          }\n\n          if (perLang instanceof Array ? perLang.includes(this.lang || defaultLangFromMd) : (this.lang || defaultLangFromMd) === perLang) {\n            md = md.replace(new RegExp(from, 'gmi'), to);\n          }\n        });\n\n        if (shouldBeCodalized) {\n          const codalized = /<((js|ts|py|java|cs)(-js|-ts|-py|-java|-cs)*)>([\\s\\S]*?)<\\/\\1>/gim;\n          md = md.replace(codalized, (match, $1, __, ___, $4) => {\n            const candidates = $1.split('-');\n            return `<span class=\"inline-content${\n              candidates.includes(this.code || defaultCodeFromMd) ? ' active' : ''\n            }\" id=\"${$1}\">${$4}</span>`\n          });\n        }\n\n        if (shouldBeLocalized) {\n          const localized = /<(uk|ru|en)>([\\s\\S]*?)<\\/\\1>/gim;\n          md = md.replace(localized, (match, $1, $2) => {\n            return $1 === (this.lang || defaultLangFromMd) ? $2 : ''\n          });\n        }\n\n        let tocLinks = [];\n        const tocStartLevelOption = /<!--TOC>(\\d)-->/i;\n        const [, tocStartLevel] = md.match(tocStartLevelOption) || [null, 0];\n        renderer.heading = (text, level) => {\n          const [, pure, userId] = text.match(/^(.*)?\\s*{#(.*)}$/im) || [null, text];\n          const pureWithoutTags = pure.replace(/<\\/?\\w+>/g, '');\n          const anchorIdsToLowerCase = this.config.anchorIdsToLowerCase;\n          const id =\n            userId ||\n            (anchorIdsToLowerCase\n              ? IDfy(pureWithoutTags)\n              : IDfy(pureWithoutTags, { lowerCase: false }));\n          const pixelsNumber = this.config.indentInsideTocByPixels;\n\n          if (level > tocStartLevel) {\n            const indentInsideToc = `style=\"margin-left: ${\n              pixelsNumber * (level - 1 - tocStartLevel)\n            }px\"`;\n            tocLinks.push(`<div ${indentInsideToc}><a href=\"#${id}\">${pureWithoutTags}</a></div>`);\n          }\n\n          return `<h${level}>${encodeURI(id) === id ? '' : `<span id=\"${encodeURI(id)}\"></span>`}\n          <a id=\"${id}\" class=\"anchor\" aria-hidden=\"true\" href=\"#${id}\"></a>${pure}</h${level}>`\n        };\n\n        // GENERAL TRANSLATIONS\n        const generalTranslations = /<!--((?![\\s])\\W)(.+)\\1(.+)\\1-->/gim;\n        const [...generalTranslationsMatch]  = md.matchAll(generalTranslations);\n\n        generalTranslationsMatch.forEach(([match, __, from, to]) => {\n\n          md = md.replace(new RegExp(from, 'gmi'), to);\n        })\n\n        const imgBase = /]\\(\\.\\.?\\/resources/gim; // todo: move ../resources to config\n        md = md.replace(imgBase, '](' + this.config.imgBaseNew);\n\n        const shortBreaks = /^,,,,+/gim;\n        md = md.replace(shortBreaks, '<br/>'.repeat(this.config.shortBreaksNumber));\n\n        const longBreaks = /^====+/gim;\n        md = md.replace(longBreaks, '<br/>'.repeat(this.config.longBreaksNumber));\n\n        const pageBreaks = /^===/gim;\n        md = md.replace(pageBreaks, '<div style=\"page-break-after: always;\"></div>');\n\n        this.config.disableCodeHighlightingFor.forEach((lang) => {\n          md = md.replace(new RegExp(`\\`\\`\\`${lang}`, 'gim'), '```');\n        });\n\n        const articleTypeExtension = /\\.(\\w+)\\.md(\\)|#)/gim;\n        md = md.replace(articleTypeExtension, `-$1.md$2`);\n\n        // todo: fix to skip links that start with http\n        const mdExtensions = /\\.md\\)/gim;\n        md = md.replace(mdExtensions, `-md${window.location.search})`);\n\n        const mdExtensionsWithId = /\\.md#/gim;\n        md = md.replace(mdExtensionsWithId, `-md${window.location.search}#`);\n\n        const poetryBoldOption = /<!--(.+)poetryBold(.+)-->/i;\n        const [, poetryBoldStart, poetryBoldEnd] = md.match(poetryBoldOption) || [null, '__', '__'];\n\n        const tabNameOption = /<!--(.+)tabNameBrackets(.+)-->/i;\n        const [, tabNameStart, tabNameEnd] = md.match(tabNameOption) || [null, '\"', '\"'];\n\n        const boldRegExpRule = [\n          new RegExp(`${poetryBoldStart}(.*?)${poetryBoldEnd}`, 'gmi'),\n          '<b>$1</b>'\n        ];\n        // todo: change to ```poetry ... ``` style\n        const poetries = /---[a-z]*\\n([\\s\\S]*?)\\n---/gim;\n        // const backTickPoetries = /```poetry[a-z]*\\n([\\s\\S]*?)\\n```/gim\n        // const backTickPoetries = /```poetry(:?( [a-z]+)+)?\\n([\\s\\S]*?)\\n```/gim;\n        const backTickPoetries = /```poetry: (.+)\\n([\\s\\S]*?)\\n```/gim;\n        const poetryRules = [\n          [/(___)(.*?)\\1/gim, '<em>$2</em>'], //emphasis\n\n          boldRegExpRule, //bold1\n          [/(\\*\\*)(.*?)\\1/gim, '<b>$2</b>'], //bold2\n\n          // [/^(?!.*\\/\\*.*$).*(\\*)(.*?)\\1/gmi,      '<em>$2</em>'], //emphasis\n          // TODO: fix: does not work for lines: ... * ... * ... /* ... */ ...\n          // read for more info:\n          //    https://stackoverflow.com/questions/7376238/javascript-regex-look-behind-alternative\n\n          [/(____)(.*?)\\1/gim, '<span style=\"text-decoration:underline\">$2</span>'] //underlined\n        ];\n        const isOriginalUnderscoredBoldDisabled = poetryBoldStart !== '__';\n        const processPoetry = (rules) => (match, $1, code) => {\n          \n          const [...tabNamesArray] = \n            $1.matchAll(new RegExp('\\\\w+' + tabNameStart + '[\\\\w\\\\d\\\\s\\\\S]*?' + tabNameEnd + '|(\\\\S+)', 'gim'))\n\n          const [langs, customNames] = tabNamesArray.reduce(([langs, customNames], [lang]) => {\n            let customName = null\n\n            if (lang.includes(tabNameStart)) {\n              customName = (() => {\n                const [[__, customName]] = \n                  lang.matchAll(new RegExp(tabNameStart +'([\\\\w\\\\d\\\\s\\\\S]*?)' + tabNameEnd, 'gim'))\n\n                return customName\n              })()\n              \n              lang = lang.split(tabNameStart)[0]\n            }\n\n            return[[...langs, lang], [...customNames, customName]]\n          }, [[], []])\n\n          let res = code;\n\n          for (const rule of rules) {\n            res = res.replace(rule[0], rule[1]);\n          }\n\n          if (isOriginalUnderscoredBoldDisabled) {\n            res.replace(/(__)(.*?)\\1/gim, '‡‡‡$2‡‡‡'); // to encode original __\n          }\n          \n          // return `<pre><code>${res}</code></pre>`;\n          return langs\n            ? langs\n                .map((lang, index) => `<pre><code class=\"language-${lang}\" poetry ${customNames[index] ? `data-customname=\"${customNames[index]}\"` : ''}>${res}</code></pre>`)\n                .join('\\n')\n            : `<pre>${res}</pre>`\n        };\n\n        md = md.replace(poetries, processPoetry(poetryRules));\n        md = md.replace(backTickPoetries, processPoetry(poetryRules));\n\n        const multiCodeBlocks = /```(([a-z]+)( [a-z]+)+)\\n([\\s\\S]*?)\\n```/gim;\n        md = md.replace(multiCodeBlocks, (match, $1, __, ___, $4) => {\n          const langs = $1.split(' ');\n          const code = $4;\n          return langs.map((lang) => `\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``).join('\\n')\n        });\n\n\n        // Custom tabnames\n        const  customNameTabBlocks = \n          new RegExp('```(\\\\w+): ' + tabNameStart + '([\\\\s\\\\S]+?)' + tabNameEnd + '\\n([\\\\s\\\\S]*?)```', \"gim\");\n        const [...customNameTabs] = [...md.matchAll(customNameTabBlocks)]\n\n        customNameTabs.forEach(([match, lang, customName, code]) => {\n\n          md = md.replace(match, `<pre><code class=\"language-${lang}\" data-customname=\"${customName}\">${code}</code></pre>`)\n        })\n \n \n        /* GET HTML */\n\n        let html = window.marked(md, {\n          baseUrl: this.getBaseUrl(window.location.href),\n          renderer,\n          ...opts\n        });\n\n        /* PROCESS HTML */\n\n        if (isOriginalUnderscoredBoldDisabled) {\n          html = html.replace(/‡‡‡/gim, '__');\n        }\n\n        const tocMarker = /\\[toc\\]/i;\n        const toc = `<div class=\"toc\">${tocLinks.join('')}</div>`;\n        html = html.replace(tocMarker, toc);\n\n        const codeGroups = /<p>(:::+)(manual)?<\\/p>([\\s\\S]*?)<p>\\1<\\/p>/gim;\n        const processCodeGroup = (match, $1, manual, $3) => {\n          const items = $3;\n          \n          const itemMarker =\n            /<pre><code class=\"language-(\\w+)\"( poetry)?( data-customname=.(.+).)?.*?>([\\s\\S]*?)<\\/code><\\/pre>/gim;\n        \n          let [itemsContent, itemsTitles] = [...items.matchAll(itemMarker)].reduce(\n            ([content, titles], [match, title, poetry, __, customName, inner]) => {\n        \n            customName ? title = [title, customName] : title = [title]\n\n            return [\n                [...content, poetry ? `<pre>${inner}</pre>` : match],\n                [...titles, title]\n              ]},\n            [[], []]\n          );\n        \n          const code = this.code;\n          let uniqueTitlesArray = [] \n          return `\n          <div class=\"wrapper\">\n            <div class=\"buttonWrapper\">\n              ${itemsTitles\n                .map(\n                  (title, index) => {\n                    let duplicatedTitle = false\n                    uniqueTitlesArray.includes(title[0]) ? duplicatedTitle = true : uniqueTitlesArray.push(title[0])\n\n                    return `<button class=\"tab-button${\n                      (manual \n                        ? (index === 0) ? ' active' : '' \n                        : (code ? code === IDfy(title[0]) && !duplicatedTitle : index === 0) ? ' active' : ''\n                      )\n                    }\" data-id=\"${IDfy(title[0])}\">${title.length > 1 ? title[1] : title[0]}</button>`\n                  })\n                .join('\\n')}\n            </div>\n            <div class=\"contentWrapper\">\n              ${itemsContent\n                .map(\n                  (item, index) =>  {\n                    let duplicatedTitle = false\n                    index === 0 ? uniqueTitlesArray = [] : null\n                    uniqueTitlesArray.includes(itemsTitles[index][0]) ? duplicatedTitle = true : uniqueTitlesArray.push(itemsTitles[index][0])\n                    \n                    return `<div class=\"content${\n                      (manual \n                        ? (index === 0) ? ' active' : '' \n                        // : (code ? code === IDfy((itemsTitles[index] instanceof Array) ? itemsTitles[index][0] : itemsTitles[index]) : index === 0) ? ' active' : ''\n                        : (code ? code === IDfy(itemsTitles[index][0]) && !duplicatedTitle : index === 0) ? ' active' : ''\n                      )\n                    }\" id=\"${IDfy(itemsTitles[index][0])}\">${item}</div>`\n                  })\n                .join('\\n')}\n            </div>\n          </div>\n          `.trim()\n        };\n\n        html = html.replace(codeGroups, processCodeGroup);\n\n        const languageJsMarker = /<pre><code class=\"language-(js|javascript)\"/gim;\n        html = html.replace(languageJsMarker, '<pre><code class=\"language-typescript\"');\n\n        return html\n      } else {\n        this.fire('zero-md-error', {\n          msg: `[zero-md] HTTP error ${resp.status} while fetching src`,\n          status: resp.status,\n          src: this.src,\n          path: this.path,\n          lang: this.lang,\n          code: this.code\n        });\n        return ''\n      }\n    };\n    const script = () => {\n      const el = this.querySelector('script[type=\"text/markdown\"]');\n      if (!el) {\n        return ''\n      }\n      const md = el.hasAttribute('data-dedent') ? this.dedent(el.text) : el.text;\n      return window.marked(md, opts)\n    };\n    const html = `<div class=\"markdown-body${\n      opts.classes ? this.arrify(opts.classes).reduce((a, c) => `${a} ${c}`, ' ') : ''\n    }\">${(await src()) || script()}</div>`;\n    return html\n  }\n\n  // Insert or replace HTML styles string into DOM and wait for links to load\n  async stampStyles(html) {\n    const node = this.makeNode(html);\n    const links = [...node.querySelectorAll('link[rel=\"stylesheet\"]')];\n    const target = [...this.root.children].find((n) => n.classList.contains('markdown-styles'));\n    if (target) {\n      target.replaceWith(node);\n    } else {\n      this.root.prepend(node);\n    }\n    await Promise.all(links.map((l) => this.onload(l))).catch((err) => {\n      this.fire('zero-md-error', {\n        msg: '[zero-md] An external stylesheet failed to load',\n        status: undefined,\n        src: err.href\n      });\n    });\n  }\n\n  // Insert or replace HTML body string into DOM and returns the node\n  stampBody(html) {\n    const node = this.makeNode(html);\n    const target = [...this.root.children].find((n) => n.classList.contains('markdown-body'));\n    if (target) {\n      target.replaceWith(node);\n    } else {\n      this.root.append(node);\n    }\n    return node\n  }\n\n  // Start observing for changes in root, templates and scripts\n  observeChanges() {\n    this.observer.observe(this, { childList: true });\n    this.querySelectorAll('template,script[type=\"text/markdown\"]').forEach((n) => {\n      this.observer.observe(n.content || n, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        characterData: true\n      });\n    });\n  }\n\n  async render(opts = {}) {\n    await this.waitForReady();\n    const stamped = {};\n    const pending = this.buildMd(opts);\n    const css = this.buildStyles();\n    if (css !== this.cache.styles) {\n      this.cache.styles = css;\n      await this.stampStyles(css);\n      stamped.styles = true;\n      await this.tick();\n    }\n    const md = await pending;\n    if (md !== this.cache.body) {\n      this.cache.body = md;\n      const node = this.stampBody(md);\n\n      /* PROCESS CODE GROUP - START */\n      const tabsWrappers = node.querySelectorAll('.wrapper');\n      tabsWrappers.forEach(\n        (tabsWrapper) =>\n          (tabsWrapper.onclick = (e) => {\n            const element = e.target;\n            const newActiveContentId = element.dataset.id;\n            const isElementANonActiveTabButton =\n              !!newActiveContentId && !element.classList.contains('active');\n\n            if (isElementANonActiveTabButton) {\n              if (this.config.groupCodeGroups) {\n                node.querySelectorAll('.wrapper .tab-button').forEach((tabButton) => {\n                  if (tabButton.dataset.id === newActiveContentId) {\n                    tabButton.classList.add('active');\n                  } else {\n                    tabButton.classList.remove('active');\n                  }\n                });\n\n                node.querySelectorAll(`.content,.inline-content`).forEach((content) => {\n                  if (content.id.split('-').includes(newActiveContentId)) {\n                    content.classList.add('active');\n                  } else {\n                    content.classList.remove('active');\n                  }\n                });\n              } else {\n                const buttonsWrapper = element.parentElement;\n                buttonsWrapper.querySelector('.tab-button.active').classList.remove('active');\n                element.classList.add('active');\n\n                const wrapper = buttonsWrapper.parentElement;\n                const contents = wrapper.querySelectorAll('.content');\n                contents.forEach((content) => {\n                  content.classList.remove('active');\n                });\n                wrapper.querySelector(`#${newActiveContentId}`).classList.add('active');\n              }\n            }\n          })\n      );\n      /* PROCESS CODE GROUP - END */\n\n      stamped.body = true;\n      await this.highlight(node);\n    }\n\n    this.fire('zero-md-rendered', { stamped });\n  }\n}\ncustomElements.define('zero-md', ZeroMd);\n\n//# sourceMappingURL=bundle.js.map\n"],"names":["notAUnicodeWord","IDfy","name","options","arguments","length","undefined","lowerCase","replace","its","with","toLowerCase","ZeroMd","_HTMLElement","_inherits","_render","_stampStyles","_buildMd","_super","defaults","_this","_classCallCheck","this","call","version","config","_objectSpread","markedUrl","prismUrl","cssUrls","hostCss","baseUrl","gitlab","token","projectId","path","branch","window","ZeroMdConfig","disableCodeHighlightingFor","shortBreaksNumber","longBreaksNumber","anchorIdsToLowerCase","indentInsideTocByPixels","imgBaseOld","imgBaseNew","lang","code","groupCodeGroups","pTagLang","cache","root","hasAttribute","_assertThisInitialized","attachShadow","mode","constructor","ready","Promise","all","marked","loadScript","Prism","clicked","bind","manualRender","render","then","setTimeout","goto","location","hash","observer","MutationObserver","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","observeChanges","stop","key","get","getAttribute","set","val","reflect","URLSearchParams","search","value","removeAttribute","setAttribute","old","connected","_this2","fire","bubbles","composed","waitForReady","shadowRoot","addEventListener","removeEventListener","_this3","resolve","handler","detail","opts","msg","console","warn","dispatchEvent","CustomEvent","node","requestAnimationFrame","any","Array","isArray","reject","onload","onerror","err","composedPath","urls","_this4","arrify","map","item","_this4$arrify2","_toArray","url","attrs","slice","el","document","createElement","src","async","forEach","attr","head","appendChild","id","getElementById","substring","scrollIntoView","ev","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","a","target","closest","host","pathname","str","match","RegExp","href","lastIndexOf","container","querySelectorAll","n","innerText","classList","add","highlightAllUnder","_unused","html","tpl","innerHTML","content","firstElementChild","_this5","query","querySelector","concat","reduce","c","_callee6","script","_this6","_args6","_context6","_ref2","_callee5","absoluteUrl","isReadingFromGitlabConfigured","resp","md","importsMatch","renderer","codalizedMatch","_ref8","_ref9","_ref9$","shouldBeCodalized","defaultCodeFromMd","localizedMatch","_ref10","_ref11","_ref11$","shouldBeLocalized","defaultLangFromMd","translationPerCodeOption","translationPerLangOption","codalized","localized","tocLinks","tocStartLevelOption","_ref16","_ref17","tocStartLevel","generalTranslations","imgBase","shortBreaks","longBreaks","pageBreaks","articleTypeExtension","mdExtensions","mdExtensionsWithId","poetryBoldOption","_ref22","_ref23","poetryBoldStart","poetryBoldEnd","tabNameOption","_ref24","_ref25","tabNameStart","tabNameEnd","boldRegExpRule","poetries","backTickPoetries","poetryRules","isOriginalUnderscoredBoldDisabled","processPoetry","multiCodeBlocks","customNameTabBlocks","_html","tocMarker","toc","codeGroups","processCodeGroup","languageJsMarker","_context5","abrupt","_callee2","absolutePath","_context2","encodeURIComponent","trim","fetch","headers","t0","sent","_callee3","_context3","startsWith","ok","text","matchAll","_ref6","_callee4","_ref5","_ref7","importURL","currentZeroMdPath","currentZeroMdFileNestingDepth","response","importedFileNestingMatch","thisPathLastElement","filePathtoReplace","importedFileNestingDepth","importURLPurePath","importedFileFolderIndex","importedContent","_context4","split","pop","filter","join","error","_x","apply","Renderer","__","_","_toConsumableArray","_ref12","_ref13","_slicedToArray","perCode","from","to","includes","_ref14","_ref15","perLang","$1","___","$4","candidates","$2","heading","level","_ref19","pure","userId","pureWithoutTags","pixelsNumber","indentInsideToc","push","encodeURI","_ref20","_ref21","repeat","rules","_step","_tabNamesArray$reduce","_ref26","_ref27","_lang$matchAll2","_lang$matchAll2$","_ref28","langs","customNames","customName","_tabNamesArray$reduce2","res","_iterator","_createForOfIteratorHelper","s","done","rule","e","f","index","_ref31","_ref32","getBaseUrl","manual","$3","_reduce","_ref33","_ref34","_ref35","titles","_ref36","title","poetry","inner","_reduce2","itemsContent","itemsTitles","uniqueTitlesArray","duplicatedTitle","status","dedent","classes","t1","t2","links","_this7","_context7","makeNode","children","find","contains","replaceWith","prepend","l","catch","_callee7","_x2","append","_this8","observe","childList","subtree","attributes","characterData","_callee8","stamped","pending","css","_this9","_args8","_context8","buildMd","buildStyles","styles","stampStyles","tick","body","stampBody","tabsWrapper","onclick","element","newActiveContentId","dataset","tabButton","remove","buttonsWrapper","parentElement","wrapper","highlight","_wrapNativeSuper","HTMLElement","customElements","define"],"mappings":"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"}